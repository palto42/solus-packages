name       : lapce
version    : 0.3.1
release    : 1
source     :
    - https://github.com/lapce/lapce/archive/refs/tags/v0.3.1.tar.gz : 82407a0b0ae8a5660ff2192ca336c9b0e361424f0fd509e0a0a73ad55071f13d
homepage   : https://github.com/lapce/lapce
license    :
    - Apache-2.0
component  : system.utils
networking : yes
summary    : Lightning-fast And Powerful Code Editor
description: |
    A modern open source code editor in Rust
builddeps  :
    - cargo
    - llvm-clang
    - pkgconfig(vulkan)
    # - vulkan-headers
    - pkgconfig(wayland-client)
    - pkgconfig(x11-xcb)
    - pkgconfig(openssl)
    # - pkgconfig(libssl-1.1)

build      : |
    # perl -MFindBin -e 1
    # perl -MFile::Comparex-e 1
    # export PATH="$PATH:$workdir"
    # ln -s /usr/bin/ar $workdir/x86_64-solus-linux-ar
    # ln -s /usr/bin/ranlib $workdir/x86_64-solus-linux-ranlib
    # Disable cross-compiling
    unset CC
    export RUST_BACKTRACE=1
    echo "### backtrace: $RUST_BACKTRACE"
    cargo build --release --workspace
install    : |
    ls target
    ls docs
    install -Dm00755 target/release/lapce $installdir/usr/bin/lapce
    # install -Dm00644 doc/fd.1 $installdir/usr/share/man/man1/fd.1
    # install -Dm00644 autocomplete/fd.bash $installdir/usr/share/bash-completion/completions/fd
    # install -Dm00644 autocomplete/fd.fish $installdir/usr/share/fish/vendor_completions.d/fd.fish
    # install -Dm00644 autocomplete/_fd $installdir/usr/share/zsh/site-functions/_fd
# check      : |
#     cargo test --all
